# B-树

## 简介

动态查找树主要有：二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree），红黑树(Red-Black Tree )，B-tree/B+-tree/ B*-tree (B~Tree)。前三者是典型的二叉查找树结构，其查找的时间复杂度O(log2N)与树的高度相关，那么降低树的高度自然会提高查找效率。

大规模数据存储中,树节点存储的元素数量是有限的,这样导致二叉查找树结构由于树的深度过大而造成磁盘I/O读写过于频繁，进而导致查询效率低下，因此我们该想办法降低树的深度，从而减少磁盘查找存取的次数。一个基本的想法就是：采用多叉树结构.

这样我们就提出了一个新的查找树结构——平衡多路查找树，即B-tree（B-tree树即B树*，B即Balanced，平衡的意思**）.

B-树，就是B树，B树的原英文名是B-tree,所以很多翻译为B-树,就会很多人误以为B-树是一种树、B树是另外一种树。其实，B-tree就是B树。B-树是以他的创始人的名字Bayer命名的树.

B-Tree是一种自平衡搜索树(self-balancing search tree).在大多数其他自平衡搜索树（如AVL和红黑树）中，假设一切都在主存储器(主存-也就是内存)中。要理解B树的使用，我们必须考虑大量不适合主存储器的数据(也就是在主存外的，存储在磁盘上的数据)。当键数Keys很高时，以块的形式从磁盘读取数据。 与主存储器访问时间相比，磁盘访问时间非常长。 使用B-Trees的主要思想是减少磁盘访问次数。 大多数树操作（搜索，插入，删除，最大，最小，..等）都需要O（h=log2N）磁盘访问，其中h是树的高度。 B树是一棵肥胖的树。 通过在B树节点中放置最大可能密钥，B-Trees的高度保持较低。 通常，B树节点大小保持等于磁盘块大小。 由于B-Tree的h值较低，因此与平衡二叉搜索树-BBST（如AVL树，红黑树等）相比，大多数操作的总磁盘访问量显着减少。

后面我们会看到，B树的各种操作能使B树保持较低的高度，从而有效避免磁盘过于频繁的查找存取操作，达到有效提高查找效率的目的.

## B树的特点

1. 所有叶子处于同一水平,也就是都是同一深度。
2）B树由最小度't'定义。 t的值取决于磁盘块大小(disk block size)。
3）除root之外的每个节点必须至少包含t-1个密钥keys。 Root可包含最少1个密钥。
4）所有节点（包括根）最多可包含2t  -  1个密钥。
5）节点的子节点数等于其中的键数加1。
6）节点的所有密钥按递增顺序排序。 两个键k1和k2之间的子包含k1和k2范围内的所有键。
7）B-Tree从根增长和缩小，这与二进制搜索树不同。 二元搜索树向下生长，也从向下收缩。
8）与其他平衡二进制搜索树一样，搜索，插入和删除的时间复杂度为O（Logn）。

## B+树

B+树改进了B树, 让内结点只作索引使用, 去掉了其中指向data record的指针, 使得每个结点中能够存放更多的key, 因此能有更大的出度. 这有什么用? 这样就意味着存放同样多的key, 树的层高能进一步被压缩, 使得检索的时间更短.