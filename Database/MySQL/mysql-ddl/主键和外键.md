# 主键

    通过某个字段能区分出一个表的所有记录，这个字段被称为主键。

# 选择什么字段建立主键

    最关键的一点是：记录一旦插入到表中，主键最好不要再修改，因为主键是用来唯一定位记录的，修改了主键，会造成一系列的影响.

如果我们以学生的身份证号作为主键，似乎能唯一定位记录。然而，身份证号也是一种业务场景，如果身份证号升位了，或者需要变更，作为主键，不得不修改的时候，就会对业务产生严重影响。

    所以，选取主键的一个基本原则是：不使用任何业务相关的字段作为主键,主键也不应该允许NULL.

    因此，身份证号、手机号、邮箱地址这些看上去可以唯一的字段，均不可用作主键。

作为主键最好是完全业务无关的字段，我们一般把这个字段命名为id。常见的可作为id字段的类型有：

1. 自增整数类型(自增INT，自增BIGINT等)：数据库会在插入数据时自动为每一条记录分配一个自增整数，这样我们就完全不用担心主键重复，也不用自己预先生成主键；
2. 全局唯一GUID类型：使用一种全局唯一的字符串作为主键，类似8f55d96b-8acc-4636-8cb8-76bf8abc2f57

>如果使用INT自增类型，那么当一张表的记录数超过(约21亿）时，会达到上限而出错。使用`BIGINT自增类型`则可以最多约922亿亿条记录

# 外键

    在students表中，通过class_id的字段，可以与另一张classes表关联起来，这种列称为外键。

```sql
ALTER TABLE students ADD CONSTRAINT fk_class_id
FOREIGN KEY (class_id) REFERENCES classes (id);
```

    外键约束的名称fk_class_id可以任意
    FOREIGN KEY (class_id)指定了class_id作为外键
    REFERENCES classes (id)指定了这个外键将关联到classes表的id列(即classes表的主键）

    通过定义外键约束，关系数据库可以保证无法插入无效的数据。即如果classes表不存在id=99的记录，students表就无法插入class_id=99的记录

>由于外键约束会降低数据库的性能，大部分互联网应用程序为了追求速度，并不设置外键约束，而是仅靠应用程序自身来保证逻辑的正确性。这种情况下，class_id仅仅是一个普通的列，只是它起到了外键的作用而已。


```sql
-- 要删除一个外键约束，也是通过ALTER TABLE实现的：
-- 注意：删除外键约束并没有删除外键这一列。删除列是通过DROP COLUMN ...实现的。
ALTER TABLE students
DROP FOREIGN KEY fk_class_id;
```